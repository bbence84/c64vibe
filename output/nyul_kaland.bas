10 REM --- TAPSI A VARAZSERDOBEN ---
20 POKE 53280,6:POKE 53281,6:PRINT CHR$(147):GOSUB 9000
30 DIM D$(20), M(20,4), O$(10), OL(10), ON$(10)
40 N=20: K=10: L=1
50 GOSUB 1000: REM ADATOK BETOLTESE
60 PRINT CHR$(14);:REM NAGYBETUK
70 REM --- FO CIKLUS ---
80 PRINT CHR$(147)
90 PRINT "HELYSZIN: "; D$(L)
100 GOSUB 2000: REM TARGYAK LISTAZASA
110 INPUT "MIT TESZEL (E/D/K/NY/FELVESZ/HASZNAL)? "; C$
120 IF C$="E" OR C$="ESZAK" THEN D=1: GOTO 200
130 IF C$="D" OR C$="DEL" THEN D=2: GOTO 200
140 IF C$="K" OR C$="KELET" THEN D=3: GOTO 200
150 IF C$="NY" OR C$="NYUGAT" THEN D=4: GOTO 200
160 IF LEFT$(C$,7)="FELVESZ" THEN GOSUB 3000: GOTO 70
170 IF LEFT$(C$,7)="HASZNAL" THEN GOSUB 4000: GOTO 70
180 IF C$="HELP" THEN PRINT "PARANCSOK: E, D, K, NY, FELVESZ <TARGY>, HASZNAL <TARGY>": GOTO 110
190 PRINT "NEM ERTEM!": GOSUB 9100: GOTO 110
200 REM --- MOZGAS ---
210 NL = M(L,D)
220 IF NL=0 THEN PRINT "ARRA NEM MEHETSZ!": GOSUB 9100: GOTO 110
230 IF NL=99 THEN PRINT "AZ AJTO ZARVA VAN! KELL A KULCS.": GOSUB 9100: GOTO 110
240 L = NL: GOSUB 9050: GOTO 70
1000 REM --- ADATOK ---
1010 FOR I=1 TO N: READ D$(I), M(I,1), M(I,2), M(I,3), M(I,4): NEXT I
1020 FOR I=1 TO K: READ O$(I), ON$(I), OL(I): NEXT I
1030 RETURN
1100 DATA "KEZDO TISZTAS", 2, 0, 3, 0
1110 DATA "OREG TOLGYFA", 0, 1, 4, 0
1120 DATA "NAPOS RET", 5, 0, 0, 1
1130 DATA "BOKOR ALJA", 0, 0, 0, 2
1140 DATA "PATAK PARTJA", 0, 2, 6, 0
1150 DATA "FAHID", 0, 0, 7, 4
1160 DATA "SOTET ERDO SZELLE", 8, 0, 0, 5
1170 DATA "VARAZSGOMBA KOR", 0, 6, 9, 0
1180 DATA "BARLANG BEJARAT", 10, 0, 0, 7
1190 DATA "DENEVAR BARLANG", 0, 8, 11, 0
1200 DATA "TITKOS JARAT", 0, 0, 12, 9
1210 DATA "KINCSES KAMRA", 0, 0, 0, 10
1220 DATA "MEZ VIRAGOKKAL", 14, 0, 0, 0
1230 DATA "PIROS ALMAFA", 0, 12, 15, 0
1240 DATA "VADALMA LIGET", 0, 0, 16, 13
1250 DATA "ROKA ODUJA", 17, 0, 0, 14
1260 DATA "MAGAS SZIKLA", 0, 15, 18, 0
1270 DATA "SAS FESZKE", 0, 0, 19, 16
1280 DATA "FELHO SZIGET", 20, 0, 0, 17
1290 DATA "HOLDKO OLTAR", 0, 18, 0, 0
1500 REM --- TARGYAK ADATAI (NEV, ROVID NEV, HELY) ---
1510 DATA "ARANY REPA", "REPA", 1
1520 DATA "VARAZS KULCS", "KULCS", 4
1530 DATA "REGIS TERKEP", "TERKEP", 3
1540 DATA "LAMPAS", "LAMPAS", 13
1550 DATA "VARAZSPALCA", "PALCA", 11
1560 DATA "KEK KAVICS", "KAVICS", 5
1570 DATA "EZUST GYURU", "GYURU", 15
1580 DATA "PIROS ALMA", "ALMA", 14
1590 DATA "SAS TOLL", "TOLL", 18
1600 DATA "HOLDKRISTALY", "KRISTALY", 20
2000 REM --- TARGYAK KIIRASA ---
2010 CNT=0
2020 FOR I=1 TO K
2030 IF OL(I)=L THEN PRINT "ITT LATSZ EGYET: " + O$(I): CNT=CNT+1
2040 NEXT I
2050 RETURN
3000 REM --- FELVESZ ---
3010 IF LEN(C$)<9 THEN PRINT "MIT AKARSZ FELVENNI?": RETURN
3015 O$ = RIGHT$(C$, LEN(C$)-8)
3020 FOR I=1 TO K
3030 IF ON$(I)=O$ AND OL(I)=L THEN OL(I)=0: PRINT "FELVETTED!": GOSUB 9050: RETURN
3040 NEXT I
3050 PRINT "NINCS ITT ILYEN.": RETURN
4000 REM --- HASZNAL ---
4010 IF LEN(C$)<9 THEN PRINT "MIT AKARSZ HASZNALNI?": RETURN
4015 O$ = RIGHT$(C$, LEN(C$)-8)
4020 IF O$="KULCS" AND OL(2)=0 AND L=8 THEN M(8,1)=9: PRINT "KINYITOTTAD A BARLANGOT!": GOSUB 9050: RETURN
4030 IF O$="REPA" AND OL(1)=0 AND L=15 THEN PRINT "A ROKA MEGESZI A REPAT ES BAKEHAGY.": M(15,1)=17: RETURN
4040 PRINT "NEM TORTENIK SEMMI."
4050 RETURN
9000 REM --- GRAFIKA ES ZENE INIT ---
9010 POKE 54296, 15: REM VOL
9020 PRINT "    (\_/)    "
9030 PRINT "    (o.o)    "
9040 PRINT "    (> <)    "
9050 POKE 54273, 20: POKE 54272, 0: POKE 54276, 17: POKE 54277, 0
9060 FOR T=1 TO 50: NEXT T: POKE 54276, 0
9070 RETURN
9100 REM --- HIBA HANG ---
9110 POKE 54273, 5: POKE 54272, 0: POKE 54276, 33: FOR T=1 TO 100: NEXT T: POKE 54276, 0
9120 RETURN
